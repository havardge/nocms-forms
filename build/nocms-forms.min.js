!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.NoCMSForms=e()}}(function(){var e;return function t(e,n,o){function r(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return r(n?n:t)},f,f.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){(function(o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=window.React,f=window.ReactDOM,l=e("nocms-stores"),p=e("nocms-utils"),d=e("nocms-events"),m=e("./Spinner"),v=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.handleStoreChange=n.handleStoreChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.state=e.initialState||{},n.state.isValid=!1,n.state.isDisabled=!1,n.state.isSubmitting=!1,"server"!==o.environment&&l.createStore(e.store,e.initialState,n.handleStoreChange),n}return s(t,e),a(t,[{key:"componentWillUnmount",value:function(){"server"!==o.environment&&l.remove(this.props.store,this.handleStoreChange)}},{key:"handleStoreChange",value:function(e){this.setState({store:e})}},{key:"handleFinishSubmit",value:function(){this.setState({isSubmitting:!1,isDisabled:!1})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={},o=!0;return Object.keys(this.state.store).forEach(function(e){var r=t.state.store[e];if(null!==typeof props){if("object"!==("undefined"==typeof r?"undefined":u(r)))return void(n[e]=r);r.isValidated||(o=o&&r.validate()),r.isValidated&&(o=o&&r.isValid),o&&(n[e]=r.convertDate?t.convertDate(r.value):r.value)}}),this.setState({isValid:o}),o?(this.setState({isSubmitting:!0,isDisabled:!0}),d.trigger("form_sent",this.props.store),void(this.props.onSubmit&&this.props.onSubmit(n,this.handleFinishSubmit.bind(this)))):void this.scrollToError()}},{key:"scrollToError",value:function(){var e=f.findDOMNode(this);setTimeout(function(){var t=e.querySelector(".error");t&&!function(){var e=t.offsetTop,n=t.querySelector("input");p.scrollTo(document.body,e-160,400,function(){n.focus()})}()},0)}},{key:"convertDate",value:function(e){if(/^\d{4}\-\d{2}\-\d{2}/.test(e))return e;var t=e.match(/^(\d{2})\.(\d{2})\.(\d{4})/);return t?t[3]+"-"+t[2]+"-"+t[1]:e}},{key:"render",value:function(){var e="form",t=this.state.isSubmitting?c.createElement(m,{visible:!0,light:!0}):this.props.submitButton;return c.createElement("form",{onSubmit:this.handleSubmit,className:e,noValidate:!0},this.props.errorText?c.createElement("div",{className:"error error-summary visible"},this.props.errorText):null,this.props.children,"server"!==o.environment?c.createElement("div",{className:"button-container"},c.createElement("button",{disabled:this.props.disabledSubmitButton||this.state.isDisabled,type:"submit",id:this.props.submitButtonId,className:"pure-button button-primary"},t)):c.createElement(m,{visible:!0}))}}]),t}(c.Component);v.propTypes={initialState:c.PropTypes.object,store:c.PropTypes.string,messageType:c.PropTypes.string,onResponse:c.PropTypes.func,onSubmit:c.PropTypes.func,submitButton:c.PropTypes.string,errorText:c.PropTypes.string,children:c.PropTypes.array,disabledSubmitButton:c.PropTypes.bool,submitButtonId:c.PropTypes.string},n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Spinner":2,"nocms-events":3,"nocms-stores":4,"nocms-utils":5}],2:[function(e,t,n){"use strict";var o=window.React,r=function(e){var t=e.visible,n=e.text,r=t?"":"hidden";return o.createElement("div",{className:r},o.createElement("div",{className:"spinner-container"},n?o.createElement("span",null,(void 0).props.text):null,o.createElement("div",{className:"spinner"},o.createElement("div",{className:"rect1"}),o.createElement("div",{className:"rect2"}),o.createElement("div",{className:"rect3"}),o.createElement("div",{className:"rect4"}),o.createElement("div",{className:"rect5"}))))};r.propTypes={visible:o.PropTypes.bool,text:o.PropTypes.string},t.exports=r},{}],3:[function(t,n,o){!function(t,r){if("object"==typeof o&&"object"==typeof n)n.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{var i=r();for(var s in i)("object"==typeof o?o:t)[s]=i[s]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n={},o=function(e,t){return"function"!=typeof t?void console.error("Listener to "+e+"  is not a function"):(n[e]||(n[e]=[]),void n[e].push(t))},r=function(e,t){var o=n[e].indexOf(t);o!==-1&&n[e].splice(o,1)},i=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];n[e]&&n[e].forEach(function(e){e.apply(this,o)})};e.exports={listenTo:o,stopListenTo:r,trigger:i}}])})},{}],4:[function(t,n,o){!function(t,r){if("object"==typeof o&&"object"==typeof n)n.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{var i=r();for(var s in i)("object"==typeof o?o:t)[s]=i[s]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1),r={},i=function(e,t){o.listenTo("store:"+e,t)},s=function(e,t){o.stopListenTo("store:"+e,t)},u=function(e,t,n){var o=t,s=n;"function"==typeof o&&(s=o,o={}),r[e]||(r[e]=o||{}),"function"==typeof s&&i(e,s)},a=function(e,t){delete r[e],"function"==typeof t&&s(e,t)},c=function(e){return r[e]},f=function(e,t){r[e]&&null!==t&&(Object.keys(t).forEach(function(n){r[e][n]=t[n]}),o.trigger("store:"+e,r[e]))};e.exports={createStore:u,remove:a,getStore:c,subscribe:i,unsubscribe:s,update:f}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n={},o=function(e,t){return"function"!=typeof t?void console.error("Listener to "+e+"  is not a function"):(n[e]||(n[e]=[]),void n[e].push(t))},r=function(e,t){var o=n[e].indexOf(t);o!==-1&&n[e].splice(o,1)},i=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];n[e]&&n[e].forEach(function(e){e.apply(this,o)})};e.exports={listenTo:o,stopListenTo:r,trigger:i}}])})}])})},{}],5:[function(t,n,o){!function(t,r){if("object"==typeof o&&"object"==typeof n)n.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{var i=r();for(var s in i)("object"==typeof o?o:t)[s]=i[s]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n=function(e,t,n,o){var r=e.scrollTop,i=t-r,s=40,u=function(e,t,n,o){return e/=o/2,e<1?n/2*e*e+t:(e-=1,-n/2*(e*(e-2)-1)+t)},a=function c(t){var a=t+s,f=u(a,r,i,n);"BODY"===e.nodeName?(document.body.scrollTop=f,document.documentElement&&(document.documentElement.scrollTop=f)):e.scrollTop=f,a<n?setTimeout(function(){c(a)},s):o&&o()};a(0)};e.exports={scrollTo:n}}])})},{}]},{},[1])(1)});
//# sourceMappingURL=./build/nocms-forms.min.js.map